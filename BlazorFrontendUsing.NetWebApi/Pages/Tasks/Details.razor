@page "/tasks/Details/{id:int}"
@inject HttpClient Http
@using BlazorFrontendUsing.NetWebApi.Models
@inject NavigationManager Navigation

<h3>Task Details</h3>

@if (task == null)
{
    <p>Loading...</p>
}
else
{
    <div class="card p-3">
        <p><strong>Title:</strong> @task.Title</p>
        <p><strong>Description:</strong> @task.Description</p>
        <p><strong>Due Date:</strong> @task.DueDate?.ToString("yyyy-MM-dd")</p>
        <p><strong>Completed:</strong> @(task.IsCompleted ? "✅ Yes" : "❌ No")</p>

        <button class="btn btn-secondary" @onclick="GoBack">Back</button>
    </div>
}

@code {
    [Parameter] public int id { get; set; }
    private TaskListitem? task;

    protected override async Task OnInitializedAsync()
    {
        // Fetch task from API
        task = await Http.GetFromJsonAsync<TaskListitem>($"https://localhost:7291/api/Task/{id}");
    }

    private void GoBack()
    {
        Navigation.NavigateTo("/tasks");
    }
}
